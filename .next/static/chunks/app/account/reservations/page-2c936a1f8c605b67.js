(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[597],{3470:function(e,t,r){Promise.resolve().then(r.bind(r,4713)),Promise.resolve().then(r.bind(r,1121)),Promise.resolve().then(r.t.bind(r,1749,23)),Promise.resolve().then(r.t.bind(r,5250,23))},4713:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return l}});var n=r(7437),a=r(2265);let i=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"}))});r(9009);var s=function(){return(0,n.jsx)("div",{className:"spinner-mini"})},l=function(e){let{bookingId:t,onDelete:r}=e,[l,o]=(0,a.useTransition)();return console.log(t),(0,n.jsx)("button",{onClick:function(){confirm("Are you sure you want to delete this reservation? This action cannot be undone.")&&o(()=>r(t))},className:"group flex items-center gap-2 uppercase text-xs font-bold text-primary-300 flex-grow px-3 hover:bg-accent-600 transition-colors hover:text-primary-900",children:l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{className:"h-5 w-5 text-primary-600 group-hover:text-primary-800 transition-colors"}),(0,n.jsx)("span",{className:"mt-1",children:(0,n.jsx)(s,{})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i,{className:"h-5 w-5 text-primary-600 group-hover:text-primary-800 transition-colors"}),(0,n.jsx)("span",{className:"mt-1",children:"Delete"})]})})}},1121:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),a=r(2265);let i=a.forwardRef(function({title:e,titleId:t,...r},n){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-8.4 8.4a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32l8.4-8.4Z"}),a.createElement("path",{d:"M5.25 5.25a3 3 0 0 0-3 3v10.5a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3V13.5a.75.75 0 0 0-1.5 0v5.25a1.5 1.5 0 0 1-1.5 1.5H5.25a1.5 1.5 0 0 1-1.5-1.5V8.25a1.5 1.5 0 0 1 1.5-1.5h5.25a.75.75 0 0 0 0-1.5H5.25Z"}))});var s=r(2328);function l(e,t){let r=(0,s.Q)(e),n=(0,s.Q)(t),a=r.getTime()-n.getTime();return a<0?-1:a>0?1:a}var o=r(8620),c=r(2028),u=r(7836),f=r(4664);let d={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},m=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,x=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,h=/^([+-])(\d{2})(?::?(\d{2}))?$/;function p(e){return e?parseInt(e):1}function g(e){return e&&parseFloat(e.replace(",","."))||0}let b=[31,null,31,30,31,30,31,31,30,31,30,31];function v(e){return e%400==0||e%4==0&&e%100!=0}function N(e){return+(0,s.Q)(e)<Date.now()}var D=r(4534),y=r(1874),w=r(1835),j=r(4713),M=r(7447),T=r.n(M),E=r(8792);let C=e=>(function(e,t,r){var n,a,i,d;let m,x,h;let p=(0,u.j)(),g=r?.locale??p.locale??c._,b=l(e,t);if(isNaN(b))throw RangeError("Invalid time value");let v=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:b});b>0?(m=(0,s.Q)(t),x=(0,s.Q)(e)):(m=(0,s.Q)(e),x=(0,s.Q)(t));let N=(n=x,a=m,(d=void 0,e=>{let t=(d?Math[d]:Math.trunc)(e);return 0===t?0:t})((+(0,s.Q)(n)-+(0,s.Q)(a))/1e3)),D=Math.round((N-((0,f.D)(x)-(0,f.D)(m))/1e3)/60);if(D<2){if(r?.includeSeconds){if(N<5)return g.formatDistance("lessThanXSeconds",5,v);if(N<10)return g.formatDistance("lessThanXSeconds",10,v);if(N<20)return g.formatDistance("lessThanXSeconds",20,v);if(N<40)return g.formatDistance("halfAMinute",0,v);else if(N<60)return g.formatDistance("lessThanXMinutes",1,v);else return g.formatDistance("xMinutes",1,v)}return 0===D?g.formatDistance("lessThanXMinutes",1,v):g.formatDistance("xMinutes",D,v)}if(D<45)return g.formatDistance("xMinutes",D,v);if(D<90)return g.formatDistance("aboutXHours",1,v);if(D<o.H_)return g.formatDistance("aboutXHours",Math.round(D/60),v);if(D<2520)return g.formatDistance("xDays",1,v);if(D<o.fH){let e=Math.round(D/o.H_);return g.formatDistance("xDays",e,v)}if(D<2*o.fH)return h=Math.round(D/o.fH),g.formatDistance("aboutXMonths",h,v);if((h=function(e,t){let r;let n=(0,s.Q)(e),a=(0,s.Q)(t),i=l(n,a),o=Math.abs(function(e,t){let r=(0,s.Q)(e),n=(0,s.Q)(t);return 12*(r.getFullYear()-n.getFullYear())+(r.getMonth()-n.getMonth())}(n,a));if(o<1)r=0;else{1===n.getMonth()&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-i*o);let t=l(n,a)===-i;(function(e){let t=(0,s.Q)(e);return+function(e){let t=(0,s.Q)(e);return t.setHours(23,59,59,999),t}(t)==+function(e){let t=(0,s.Q)(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}(t)})((0,s.Q)(e))&&1===o&&1===l(e,a)&&(t=!1),r=i*(o-Number(t))}return 0===r?0:r}(x,m))<12){let e=Math.round(D/o.fH);return g.formatDistance("xMonths",e,v)}{let e=h%12,t=Math.trunc(h/12);return e<3?g.formatDistance("aboutXYears",t,v):e<9?g.formatDistance("overXYears",t,v):g.formatDistance("almostXYears",t+1,v)}})(function(e,t){let r,n;let a=function(e){let t;let r={},n=e.split(d.dateTimeDelimiter);if(n.length>2)return r;if(/:/.test(n[0])?t=n[0]:(r.date=n[0],t=n[1],d.timeZoneDelimiter.test(r.date)&&(r.date=e.split(d.timeZoneDelimiter)[0],t=e.substr(r.date.length,e.length))),t){let e=d.timezone.exec(t);e?(r.time=t.replace(e[1],""),r.timezone=e[1]):r.time=t}return r}(e);if(a.date){let e=function(e,t){let r=RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:null===i?a:100*i,restDateString:e.slice((n[1]||n[2]).length)}}(a.date,(void 0)??2);r=function(e,t){if(null===t)return new Date(NaN);let r=e.match(m);if(!r)return new Date(NaN);let n=!!r[4],a=p(r[1]),i=p(r[2])-1,s=p(r[3]),l=p(r[4]),o=p(r[5])-1;if(n)return l>=1&&l<=53&&o>=0&&o<=6?function(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let a=n.getUTCDay()||7;return n.setUTCDate(n.getUTCDate()+((t-1)*7+r+1-a)),n}(t,l,o):new Date(NaN);{let e=new Date(0);return i>=0&&i<=11&&s>=1&&s<=(b[i]||(v(t)?29:28))&&a>=1&&a<=(v(t)?366:365)?(e.setUTCFullYear(t,i,Math.max(a,s)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let i=r.getTime(),s=0;if(a.time&&isNaN(s=function(e){let t=e.match(x);if(!t)return NaN;let r=g(t[1]),n=g(t[2]),a=g(t[3]);return(24===r?0===n&&0===a:a>=0&&a<60&&n>=0&&n<60&&r>=0&&r<25)?r*o.vh+n*o.yJ+1e3*a:NaN}(a.time)))return new Date(NaN);if(a.timezone){if(isNaN(n=function(e){if("Z"===e)return 0;let t=e.match(h);if(!t)return 0;let r="+"===t[1]?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return a>=0&&a<=59?r*(n*o.vh+a*o.yJ):NaN}(a.timezone)))return new Date(NaN)}else{let e=new Date(i+s),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return new Date(i+s+n)}(e),new Date,{addSuffix:!0}).replace("about ","");var Q=function(e){var t,r,a;let{booking:s,onDelete:l}=e,{id:o,guestId:c,startDate:u,endDate:f,numNights:d,totalPrice:m,numGuests:x,status:h,created_at:p,cabins:{name:g,image:b}}=s;return(0,n.jsxs)("div",{className:"flex border border-primary-800",children:[(0,n.jsx)("div",{className:"relative h-32 aspect-square",children:(0,n.jsx)(T(),{fill:!0,src:b,alt:"Cabin ".concat(g),className:"object-cover border-r border-primary-800"})}),(0,n.jsxs)("div",{className:"flex-grow px-6 py-3 flex flex-col",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("h3",{className:"text-xl font-semibold",children:[d," nights in Cabin ",g]}),N(new Date(u))?(0,n.jsx)("span",{className:"bg-yellow-800 text-yellow-200 h-7 px-3 uppercase text-xs font-bold flex items-center rounded-sm",children:"past"}):(0,n.jsx)("span",{className:"bg-green-800 text-green-200 h-7 px-3 uppercase text-xs font-bold flex items-center rounded-sm",children:"upcoming"})]}),(0,n.jsxs)("p",{className:"text-lg text-primary-300",children:[(0,D.WU)(new Date(u),"EEE, MMM dd yyyy")," (",(r=t=new Date(u),a=(0,y.L)(t,Date.now()),+(0,w.b)(r)!=+(0,w.b)(a))?C(u):"Today",") — ",(0,D.WU)(new Date(f),"EEE, MMM dd yyyy")]}),(0,n.jsxs)("div",{className:"flex gap-5 mt-auto items-baseline",children:[(0,n.jsxs)("p",{className:"text-xl font-semibold text-accent-400",children:["$",m]}),(0,n.jsx)("p",{className:"text-primary-300",children:"•"}),(0,n.jsxs)("p",{className:"text-lg text-primary-300",children:[x," guest",x>1&&"s"]}),(0,n.jsxs)("p",{className:"ml-auto text-sm text-primary-400",children:["Booked ",(0,D.WU)(new Date(p),"EEE, MMM dd yyyy, p")]})]})]}),(0,n.jsx)("div",{className:"flex flex-col border-l border-primary-800 w-[100px]",children:N(u)?null:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(E.default,{href:"/account/reservations/edit/".concat(o),className:"group flex items-center gap-2 uppercase text-xs font-bold text-primary-300 border-b border-primary-800 flex-grow px-3 hover:bg-accent-600 transition-colors hover:text-primary-900",children:[(0,n.jsx)(i,{className:"h-5 w-5 text-primary-600 group-hover:text-primary-800 transition-colors"}),(0,n.jsx)("span",{className:"mt-1",children:"Edit"})]}),(0,n.jsx)(j.default,{bookingId:o,onDelete:l})]})})]})},H=r(9009),S=function(e){let{bookings:t}=e,[r,i]=(0,a.useOptimistic)(t,(e,t)=>e.filter(e=>e.id!==t));async function s(e){i(e),await (0,H.yx)(e)}return(0,n.jsx)("ul",{className:"space-y-6",children:r.map(e=>(0,n.jsx)(Q,{booking:e,onDelete:s},e.id))})}},9009:function(e,t,r){"use strict";r.d(t,{NH:function(){return a},k3:function(){return i},yx:function(){return s}}),r(5355);var n=r(3472);(0,n.$)("2e331df8dec3e9e323daee26687fce2ab53df48f"),(0,n.$)("8b7c6bed1c0cd29ebf2b89b9903e59109d354911");var a=(0,n.$)("20087f54aa602d5b4086a378c4299745dc4b626c"),i=(0,n.$)("51b2b1cba7e171f1a45553ca6886f74d0a56b5eb"),s=(0,n.$)("90345a854b6eafea256aa9cb5b4c6397eac54871")},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var n=r(5250),a=r.n(n)},3472:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let n=r(5355);function a(e){let{createServerReference:t}=r(6671);return t(e,n.callServer)}},7447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return l},default:function(){return o}});let n=r(6921),a=r(8630),i=r(1749),s=n._(r(536)),l=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},o=i.Image}},function(e){e.O(0,[250,749,534,971,69,744],function(){return e(e.s=3470)}),_N_E=e.O()}]);