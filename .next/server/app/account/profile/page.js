(()=>{var e={};e.id=997,e.ids=[997],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},59796:e=>{"use strict";e.exports=require("zlib")},24064:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>f,tree:()=>c});var r=a(50482),s=a(69108),n=a(62563),i=a.n(n),o=a(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);a.d(t,l);let c=["",{children:["account",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,64735)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\account\\profile\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,11615)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\account\\layout.js"],loading:[()=>Promise.resolve().then(a.bind(a,69547)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\account\\loading.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,88958)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\layout.js"],error:[()=>Promise.resolve().then(a.bind(a,60826)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\error.js"],loading:[()=>Promise.resolve().then(a.bind(a,65016)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\loading.js"],"not-found":[()=>Promise.resolve().then(a.bind(a,46178)),"G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\not-found.js"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,4998))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["G:\\next js project\\anandhu-wild-oasis-final-2-after-start\\app\\account\\profile\\page.js"],u="/account/profile/page",p={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/account/profile/page",pathname:"/account/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28040:(e,t,a)=>{let r={"20087f54aa602d5b4086a378c4299745dc4b626c":()=>Promise.resolve().then(a.bind(a,51815)).then(e=>e.signOutAction),"2e331df8dec3e9e323daee26687fce2ab53df48f":()=>Promise.resolve().then(a.bind(a,51815)).then(e=>e.editBookingAction),"51b2b1cba7e171f1a45553ca6886f74d0a56b5eb":()=>Promise.resolve().then(a.bind(a,51815)).then(e=>e.updateProfileAction),"8b7c6bed1c0cd29ebf2b89b9903e59109d354911":()=>Promise.resolve().then(a.bind(a,51815)).then(e=>e.signInAction),"90345a854b6eafea256aa9cb5b4c6397eac54871":()=>Promise.resolve().then(a.bind(a,51815)).then(e=>e.deleteProfileAction)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"20087f54aa602d5b4086a378c4299745dc4b626c":s.bind(null,"20087f54aa602d5b4086a378c4299745dc4b626c"),"2e331df8dec3e9e323daee26687fce2ab53df48f":s.bind(null,"2e331df8dec3e9e323daee26687fce2ab53df48f"),"51b2b1cba7e171f1a45553ca6886f74d0a56b5eb":s.bind(null,"51b2b1cba7e171f1a45553ca6886f74d0a56b5eb"),"8b7c6bed1c0cd29ebf2b89b9903e59109d354911":s.bind(null,"8b7c6bed1c0cd29ebf2b89b9903e59109d354911"),"90345a854b6eafea256aa9cb5b4c6397eac54871":s.bind(null,"90345a854b6eafea256aa9cb5b4c6397eac54871")}},42059:(e,t,a)=>{Promise.resolve().then(a.bind(a,42890))},27570:(e,t,a)=>{Promise.resolve().then(a.bind(a,90363))},42890:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var r=a(95344),s=a(56506),n=a(19450),i=a(6640),o=a(67088),l=a(34770),c=a(87847);let d=function(){return r.jsx("form",{action:c.NH,children:(0,r.jsxs)("button",{className:"py-3 px-5 hover:bg-primary-900 hover:text-primary-100 transition-colors flex items-center gap-4 font-semibold text-primary-200 w-full",children:[r.jsx(l.Z,{className:"h-5 w-5 text-primary-600"}),r.jsx("span",{children:"Sign out"})]})})};var u=a(8428);let p=[{name:"Home",href:"/account",icon:r.jsx(n.Z,{className:"h-5 w-5 text-primary-600"})},{name:"Reservations",href:"/account/reservations",icon:r.jsx(i.Z,{className:"h-5 w-5 text-primary-600"})},{name:"Guest profile",href:"/account/profile",icon:r.jsx(o.Z,{className:"h-5 w-5 text-primary-600"})}],f=function(){let e=(0,u.usePathname)();return r.jsx("nav",{className:"border-r border-primary-900",children:(0,r.jsxs)("ul",{className:"flex flex-col gap-2 h-full text-lg",children:[p.map(t=>r.jsx("li",{children:(0,r.jsxs)(s.default,{className:`py-3 px-5 hover:bg-primary-900 hover:text-primary-100 transition-colors flex items-center gap-4 font-semibold text-primary-200 ${e===t.href?"bg-primary-900 text-primary-100":""}`,href:t.href,children:[t.icon,r.jsx("span",{children:t.name})]})},t.name)),r.jsx("li",{className:"mt-auto",children:r.jsx(d,{})})]})})}},90363:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(95344),s=a(3729),n=a(87847),i=a(81202);function o(){let{pending:e}=(0,i.useFormStatus)();return r.jsx("button",{className:"bg-accent-500 px-8 py-4 text-primary-800 font-semibold hover:bg-accent-600 transition-all disabled:cursor-not-allowed disabled:bg-gray-500 disabled:text-gray-300",disabled:e,children:e?"Updating...":"Update profile"})}let l=function({guest:e,children:t}){let[a,i]=(0,s.useState)(),{fullName:l,email:c,nationalId:d,countryFlag:u}=e;return console.log(e),(0,r.jsxs)("form",{className:"bg-primary-900 py-8 px-12 text-lg flex gap-6 flex-col",action:n.k3,children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{children:"Full name"}),r.jsx("input",{disabled:!0,defaultValue:l,name:"fullName",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm disabled:cursor-not-allowed disabled:bg-gray-600 disabled:text-gray-400"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{children:"Email address"}),r.jsx("input",{disabled:!0,defaultValue:c,name:"email",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm disabled:cursor-not-allowed disabled:bg-gray-600 disabled:text-gray-400"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx("label",{htmlFor:"nationality",children:"Where are you from?"}),r.jsx("img",{src:u,alt:"Country flag",className:"h-5 rounded-sm"})]}),t]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("label",{htmlFor:"nationalID",children:"National ID number"}),r.jsx("input",{defaultValue:d,name:"nationalID",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm"})]}),r.jsx("div",{className:"flex justify-end items-center gap-6",children:r.jsx(o,{})})]})}},87847:(e,t,a)=>{"use strict";a.d(t,{NH:()=>s,k3:()=>n,yx:()=>i}),a(13664);var r=a(28371);(0,r.$)("2e331df8dec3e9e323daee26687fce2ab53df48f"),(0,r.$)("8b7c6bed1c0cd29ebf2b89b9903e59109d354911");var s=(0,r.$)("20087f54aa602d5b4086a378c4299745dc4b626c"),n=(0,r.$)("51b2b1cba7e171f1a45553ca6886f74d0a56b5eb"),i=(0,r.$)("90345a854b6eafea256aa9cb5b4c6397eac54871")},88335:(e,t,a)=>{"use strict";a.d(t,{auth:()=>o,signIn:()=>l,signOut:()=>c});var r=a(29538),s=a(67152),n=a(97411);let i={providers:[(0,s.default)({clientId:process.env.GOOGLE_CLIENT_ID,clientSecret:process.env.GOOGLE_CLIENT_SECRET})],callbacks:{authorized:({auth:e,request:t})=>!!e?.user,async signIn({user:e,account:t,profile:a}){try{let t=await (0,n.getGuest)(e.email);console.log(t),t||await (0,n.createGuest)({email:e.email,fullName:e.name})}catch{return!1}return!0},async session({session:e,user:t}){let a=await (0,n.getGuest)(e.user.email);return e.user.id=a?.id,e}},pages:{signIn:"/login"}},{auth:o,signIn:l,signOut:c,handlers:{GET:d,POST:u}}=(0,r.default)(i)},51815:(e,t,a)=>{"use strict";a.r(t),a.d(t,{deleteProfileAction:()=>p,editBookingAction:()=>f,signInAction:()=>c,signOutAction:()=>d,updateProfileAction:()=>u});var r=a(60398);a(75811);var s=a(43811),n=a(88335),i=a(2075),o=a(97411),l=a(52810);async function c({request:e}){await (0,n.signIn)("google",{redirectTo:"/account"})}async function d(){await (0,n.signOut)({redirectTo:"/"})}async function u(e){let t=await (0,n.auth)();if(!t)throw Error("You must be logged in");console.log(t);let a=e.get("nationalID"),[r,o]=e.get("nationality").split("%");if(!/^[a-zA-Z0-9]{6,12}$/.test(a))throw Error("Please provide a valid national ID");let l={nationality:r,countryFlag:o,nationalId:a};console.log(l);let{data:c,error:d}=await i.supabase.from("guests").update(l).eq("id",t.user.id);if(d)throw Error("Guest could not be updated");(0,s.revalidatePath)("/account/profile")}async function p(e){let t=await (0,n.auth)();if(!t)throw Error("You must be logged in");if(!(await (0,o.getBookings)(t.user.id)).map(e=>e.id).includes(e))throw Error("You can only delete your own bookings");let{error:a}=await i.supabase.from("bookings").delete().eq("id",e);if(a)throw Error("Booking could not be deleted");(0,s.revalidatePath)("/account/reservations")}async function f(e){let t=e.get("bookingid"),a=await (0,n.auth)();if(!a)throw Error("You must be logged in");if(!(await (0,o.getBookings)(a.user.id)).map(e=>String(e.id)).includes(t))throw Error("You can only delete your own bookings");let r={numGuests:e.get("numGuests"),observations:e.get("observations")},{data:c,error:d}=await i.supabase.from("bookings").update(r).eq("id",t).select().single();if(d)throw console.error(d),Error("Booking could not be updated");(0,s.revalidatePath)(`/account/reservations/edit/${t}`),(0,s.revalidatePath)("/account/reservations"),(0,l.redirect)("/account/reservations")}(0,a(46893).ensureServerEntryExports)([c,d,u,p,f]),(0,r.registerServerReference)("8b7c6bed1c0cd29ebf2b89b9903e59109d354911",c),(0,r.registerServerReference)("20087f54aa602d5b4086a378c4299745dc4b626c",d),(0,r.registerServerReference)("51b2b1cba7e171f1a45553ca6886f74d0a56b5eb",u),(0,r.registerServerReference)("90345a854b6eafea256aa9cb5b4c6397eac54871",p),(0,r.registerServerReference)("2e331df8dec3e9e323daee26687fce2ab53df48f",f)},97411:(e,t,a)=>{"use strict";a.d(t,{createGuest:()=>i,getBookings:()=>n,getGuest:()=>s});var r=a(2075);async function s(e){let{data:t,error:a}=await r.supabase.from("guests").select("*").eq("email",e).single();return t}async function n(e){let{data:t,error:a,count:s}=await r.supabase.from("bookings").select("id, created_at, startDate, endDate, numNights, numGuests, totalPrice, guestId, cabinId, cabins(name, image)").eq("guestId",e).order("startDate");if(a)throw console.error(a),Error("Bookings could not get loaded");return t}async function i(e){let{data:t,error:a}=await r.supabase.from("guests").insert([e]);if(a)throw console.error(a),Error("Guest could not be created");return t}a(52810)},2075:(e,t,a)=>{"use strict";a.d(t,{supabase:()=>r});let r=(0,a(53094).createClient)(process.env.SUPABASE_URL,process.env.SUPABASE_KEY)},11615:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var r=a(25036);let s=(0,a(86843).createProxy)(String.raw`G:\next js project\anandhu-wild-oasis-final-2-after-start\app\_components\SideNavigation.js`),{__esModule:n,$$typeof:i}=s,o=s.default;function l({children:e}){return(0,r.jsxs)("div",{className:"grid grid-cols-[16rem_1fr] h-full gap-12",children:[r.jsx(o,{}),r.jsx("div",{className:"py-1",children:e})]})}},69547:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>n});var r=a(25036),s=a(15300);function n(){return r.jsx(s.Z,{})}},64735:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p,metadata:()=>u});var r=a(25036),s=a(66563);async function n({defaultCountry:e,name:t,id:a,className:n}){let i=await (0,s.ox)(),o=i.find(t=>t.name===e)?.flag??"";return(0,r.jsxs)("select",{name:t,id:a,defaultValue:`${e}%${o}`,className:n,children:[r.jsx("option",{value:"",children:"Select country..."}),i.map(e=>r.jsx("option",{value:`${e.name}%${e.flag}`,children:e.name},e.name))]})}let i=(0,a(86843).createProxy)(String.raw`G:\next js project\anandhu-wild-oasis-final-2-after-start\app\_components\UpdateProfiile.js`),{__esModule:o,$$typeof:l}=i,c=i.default;var d=a(46370);let u={title:"Update profile"};async function p(){let e=await (0,d.I8)(),t=await (0,s.PT)(e.user.email);return console.log(t),(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"font-semibold text-2xl text-accent-400 mb-4",children:"Update your guest profile"}),r.jsx("p",{className:"text-lg mb-8 text-primary-200",children:"Providing the following information will make your check-in process faster and smoother. See you soon!"}),r.jsx(c,{guest:t,children:r.jsx(n,{name:"nationality",id:"nationality",className:"px-5 py-3 bg-primary-200 text-primary-800 w-full shadow-sm rounded-sm",defaultCountry:t.nationality})})]})}}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[638,148,38,610,867],()=>a(24064));module.exports=r})();